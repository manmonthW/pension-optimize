# 养老最优解 v2.0

一个帮助用户计算最优退休方案的智能工具，支持多维度参数输入，自动模拟未来缴费，对比不同退休年龄的收益差异。

**✨ 纯前端实现，无需后端服务，开箱即用！**

## 🚀 双版本支持

- **微信小程序版** - 原生微信小程序体验
- **Web 版** - 可部署到 Vercel、Netlify 等平台，支持浏览器访问

> 📖 详细部署指南请查看 [DEPLOYMENT.md](./DEPLOYMENT.md)

## 项目结构

```
pension-v2.0/
├── miniprogram/            # 微信小程序版本
│   ├── components/        # 公共组件
│   │   ├── level-selector/    # 缴费等级选择器
│   │   └── plan-card/         # 方案卡片
│   ├── pages/             # 页面
│   │   ├── index/         # 首页（输入页）
│   │   ├── result/        # 结果页
│   │   └── detail/        # 详情页
│   ├── utils/             # 工具函数
│   │   ├── api.js         # API封装
│   │   └── pensionCalc.js # 养老金计算引擎（核心）
│   ├── config/            # 配置文件
│   │   └── cityConfig.js  # 城市参数和N表
│   ├── app.js
│   ├── app.json
│   └── app.wxss
│
├── web/                    # Web版本（可部署到Vercel等平台）
│   ├── index.html         # 主页面
│   ├── css/
│   │   └── style.css      # 样式文件
│   └── js/
│       ├── cityConfig.js  # 城市配置
│       ├── pensionCalc.js # 计算引擎
│       └── app.js         # 应用逻辑
│
├── vercel.json             # Vercel部署配置
├── DEPLOYMENT.md           # 部署指南
├── PRD.md                  # 产品需求文档
├── Tech Spec v1.0.md       # 技术规格文档
└── 用户使用手册.md         # 用户使用手册
```

## 功能特性

### 核心功能
- ✅ 多维度用户输入（人员类型、出生年月、缴费基数等）
- ✅ 未来缴费逐月模拟
- ✅ 多场景退休方案生成（正常退休+延迟退休）
- ✅ 养老金精确计算（基础养老金+个人账户养老金）
- ✅ 智能推荐最优方案
- ✅ 回本周期分析
- ✅ 方案对比展示

### 支持参数
- 人员类型：男职工、女干部、女工人
- 就业状态：在职、失业补贴内、失业补贴外、灵活就业
- 缴费指数：60%、100%、200%、300%
- 4050补贴支持
- 个人账户复利计息

## 快速开始

### 微信小程序版

#### 1️⃣ 导入项目
- 打开微信开发者工具
- 选择"导入项目"
- 选择 `miniprogram` 目录
- 填写 AppID（测试可使用测试号）

#### 2️⃣ 编译运行
- 点击"编译"按钮
- 在模拟器中查看效果
- 或扫码在真机上预览

**就是这么简单！无需安装依赖，无需启动后端服务！**

### Web 版

#### 方法1：本地预览
```bash
# 直接打开 web/index.html 文件
# 或使用任意静态服务器
cd web
python -m http.server 8000
# 访问 http://localhost:8000
```

#### 方法2：部署到 Vercel（推荐）
```bash
# 1. 安装 Vercel CLI
npm install -g vercel

# 2. 部署
vercel

# 3. 生产环境部署
vercel --prod
```

> 详细部署步骤请参考 [DEPLOYMENT.md](./DEPLOYMENT.md)

## 技术架构

### 纯前端架构
```
用户输入
   ↓
本地计算引擎 (pensionCalc.js)
   ↓
配置数据 (cityConfig.js)
   ↓
结果展示
```

### 核心计算引擎
位置：`miniprogram/utils/pensionCalc.js`

实现功能：
- 未来缴费逐月模拟
- 多场景方案生成
- 养老金计算公式
- 最优方案推荐算法

### 配置管理
位置：`miniprogram/config/cityConfig.js`

包含：
- 城市参数配置（社平工资、缴费比例等）
- 计发月数表（N表）

## 核心算法

### 养老金计算公式

**月养老金 = 基础养老金 + 个人账户养老金**

- **基础养老金** = 城市社平工资 × 1% × 缴费年限
- **个人账户养老金** = 个人账户余额 ÷ N值（计发月数）

### 未来缴费模拟

逐月模拟从当前到退休的缴费过程：
1. 判断就业状态和失业金剩余月数
2. 计算当月缴费金额（考虑level和4050补贴）
3. 累加个人账户余额
4. 年底计息（复利）
5. 累计缴费年限

### 最优方案推荐

使用三指标加权评分：
```
score = 月养老金增长率 × 0.5
      + 回本周期缩短比例 × 0.3
      + 缴费成本减少比例 × 0.2
```

## 配置说明

### 城市参数配置
位置：`miniprogram/config/cityConfig.js`

```javascript
CITY_CONFIG = {
  '北京': {
    city: '北京',
    avgSalary: 10500,           // 上年度社平工资
    pensionInterestRate: 0.04,  // 个人账户年利率
    baseMin: 6260,              // 缴费基数下限
    baseMax: 31833,             // 缴费基数上限
    companyRate: 0.16,          // 单位缴费比例
    personalRate: 0.08,         // 个人缴费比例
    unemploymentBase: 1850,     // 失业金标准
    unemploymentCutoffMonth: 12,// 失业金最长期限
    subsidy4050: 500            // 4050补贴金额
  }
}
```

### 添加新城市

在 `cityConfig.js` 中添加新城市配置：

```javascript
CITY_CONFIG = {
  '北京': { ... },
  '上海': {
    city: '上海',
    avgSalary: 11500,
    // ... 其他参数
  }
}
```

在首页 `pages/index/index.js` 中添加城市选项：
```javascript
cities: ['北京', '上海']
```

## 项目优势

### ✅ 零部署成本
- 无需服务器
- 无需域名备案
- 无需HTTPS证书

### ✅ 极速响应
- 本地计算，毫秒级响应
- 无网络延迟
- 离线也可使用

### ✅ 易于维护
- 配置驱动，参数化管理
- 代码清晰，易于修改
- 无后端依赖

### ✅ 隐私保护
- 数据不上传服务器
- 所有计算在本地完成
- 用户信息完全保密

## 使用示例

### 典型场景1：在职女工人
- 出生：1985年7月
- 缴费基数：8500元
- 已缴年限：13.2年
- 账户余额：82300元
- 缴费档次：100%

**计算结果**：
- 方案A（50岁退休）：月领5120元，55个月回本
- 方案B（51岁退休）：月领5640元，44个月回本 ⭐推荐
- 方案C（52岁退休）：月领5960元，46个月回本

### 典型场景2：灵活就业女性
- 4050补贴：享受
- 缴费档次：60%（降低缴费压力）

系统会自动计算补贴抵扣后的实际缴费金额。

## 技术栈

- **微信原生小程序**：无第三方框架，性能最优
- **纯JavaScript**：逻辑清晰，易于理解
- **模块化设计**：组件化开发，代码复用

## 文件说明

### 核心文件

| 文件 | 说明 |
|------|------|
| `utils/pensionCalc.js` | 养老金计算引擎，包含所有计算逻辑 |
| `config/cityConfig.js` | 城市参数和N表配置 |
| `utils/api.js` | API封装，统一调用接口 |
| `pages/index/index.js` | 首页逻辑，用户输入处理 |
| `pages/result/result.js` | 结果页逻辑，方案展示 |
| `pages/detail/detail.js` | 详情页逻辑，单个方案详情 |

### 组件

| 组件 | 说明 |
|------|------|
| `level-selector` | 缴费等级选择器（60%/100%/200%/300%） |
| `plan-card` | 方案卡片，用于结果列表展示 |

## 常见问题

### Q: 计算结果准确吗？
A: 计算公式严格按照国家养老金计算标准，模拟算法考虑了失业金、4050补贴、账户利率等所有因素。

### Q: 支持哪些城市？
A: 目前支持北京，可以通过修改配置文件轻松添加其他城市。

### Q: 为什么不用后端？
A: 纯前端方案具有零成本、高性能、隐私保护等优势，且计算逻辑相对独立，无需后端支持。

### Q: 如何更新政策参数？
A: 只需修改 `config/cityConfig.js` 中的参数即可，无需修改代码逻辑。

## 注意事项

1. **政策变化**：社保政策可能调整，请定期更新配置参数
2. **仅供参考**：计算结果仅供参考，实际养老金以社保部门核定为准
3. **数据准确性**：请确保输入数据准确，否则会影响计算结果

## 扩展功能建议

### 可以添加的功能
- [ ] 多城市对比
- [ ] 养老金增长预测（考虑调整率）
- [ ] 结果分享图片生成
- [ ] 历史计算记录保存
- [ ] PDF报告导出

### 数据持久化
可以使用小程序的 `wx.setStorageSync` 保存用户输入，下次打开自动恢复。

## 开发团队

基于 PRD v1.0 和 Tech Spec v1.0 开发，采用纯前端架构优化。

## 许可证

MIT License

## 更新日志

### v2.0.0 (2024)
- ✅ 采用纯前端架构，无需后端服务
- ✅ 完整实现养老金计算引擎
- ✅ 支持多种就业状态和补贴
- ✅ 智能推荐最优方案
- ✅ 完善的UI界面
- ✅ 响应式组件设计
- ✅ 配置驱动，易于扩展

---

**立即开始使用，30秒找到你的养老最优解！**
